                                               
<%-- :mode=jsp: --%>
<%@ include file="../../standalone.jsf" %>

<style>
#loadables {
	position:relative;
	height:480px;
}

.loadable {
	position:absolute;
	display:block;
	width:500px;
	height:300px;
	background-color:#000;
	border:1px solid #666;
	color:#fff;
}

<c:set var="css">
/* loading state */
.loading {
	opacity:0.5;
	background-color:#123;
}

/* loaded content while it's assets are being loaded */
.loading div {
	visibility:hidden;		
}

/* progress indicator */
.progress {
	color:yellow;
	margin:5px;
	font-size:10px;
	visibility:visible !important;
}
</c:set>
${css}
</style>


<p><button id="loadButton">Load assets</button></p>

<div id="loadables">

	<!-- background image -->
	<div style="background-image:url(http://farm3.static.flickr.com/2492/3942153630_38e1a62b2d.jpg)"
		class="loadable"></div>
		
	
	<!-- regular image -->
	<img src="http://farm1.static.flickr.com/7/6481762_3d2c7e79f7.jpg" class="loadable" 
		style="top:40px;left:40px"/>
		
	
	<!-- HTML "page" -->
	<div style="top:80px;left:80px" class="loadable">
		<a href="loaded-content.htm"></a>
	</div>
	
</div>


<script>
$(function() {
<c:set var="js">
// initialize lazyload
var api = $("#loadables > *").lazyload({
		
	// a little slower fade in effect
	fadeInSpeed: 'medium',
	
	// when an individual element has been loaded
	onLoad: function(e, el) {
		el.animate({left: '+=20'});
	},
	
	// after ALL elements have been loaded
	onLoadAll: function(e, els) {
		els.animate({left: '-=20'});
	},
	
	// API is returned
	api: true
});

// button starts loading
$("#loadButton").one("click", function() {		
	api.load();		  
});
</c:set>
${js}

});
</script>

